<!DOCTYPE html>
<!--[if IE 6]><html lang="ja" class="ie6 lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html lang="ja" class="ie7 lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html lang="ja" class="ie8 lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html lang="ja"><!--<![endif]-->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="description" content="">
<meta name="keywords" content="">
<title>Geolocation</title>
<link href="css/common.css" rel="stylesheet">
<script src="js/common.js"></script>
<!--[if lt IE 9]><script src="js/html5shiv.js"></script><![endif]-->
<script>
$(function(){
	var i = 0;
	if (navigator.geolocation) {
		var getGeolocation = function(){
			// 現在の位置情報を取得
			navigator.geolocation.getCurrentPosition(
				// （1）位置情報の取得に成功した場合
				function (pos) {
					$('#latitude').text(pos.coords.latitude);
					$('#longitude').text(pos.coords.longitude);
					i++;
					$('#count').text(i);
				},
				// （2）位置情報の取得に失敗した場合
				function (error) {
					var message = "";

					switch (error.code) {

						// 位置情報が取得できない場合
						case error.POSITION_UNAVAILABLE:
						message = "位置情報の取得ができませんでした。";
						break;

						// Geolocationの使用が許可されない場合
						case error.PERMISSION_DENIED:
						message = "位置情報取得の使用許可がされませんでした。";
						break;

						// タイムアウトした場合
						case error.PERMISSION_DENIED_TIMEOUT:
						message = "位置情報取得中にタイムアウトしました。";
						break;
					}
					window.alert(message);
				}
			);
		}
		getGeolocation();
		// setInterval(function(){
		// 	getGeolocation();
		// }, 2000);
	} else {
		window.alert("本ブラウザではGeolocationが使えません");
	}
});
</script>
</head>
<body>

<h1>Geolocation</h1>

<dl>
	<dt>現在地</dt>
	<dd>緯度：<span id="latitude"></span></dd>
	<dd>緯度：<span id="longitude"></span></dd>
</dl>

<div id="count"></div>

</body>
</html>
